

- name: home
  slug: home
  width: wide
  head-widgets:
  - type: monitor
    hide-header: true
    cache: 5s
    sites:
    - title: jellyfin
      url: https://watch.k8s.iaminyourpc.xyz
      icon: di:jellyfin
      timeout: 10s
    - title: immich
      url: https://photos.k8s.iaminyourpc.xyz
      icon: di:immich
      timeout: 10s
    - title: pihole
      url: http://pihole.k8s.iaminyourpc.xyz/admin
      icon: https://upload.wikimedia.org/wikipedia/commons/0/00/Pi-hole_Logo.png
      timeout: 10s
    - title: teslamate
      url: http://car.k8s.iaminyourpc.xyz
      icon: https://www.pngplay.com/wp-content/uploads/13/Tesla-Logo-PNG-Photo-Image.png
      timeout: 10s
      basic-auth:
        username: ${TESLAMATE_USER}
        password: ${TESLAMATE_PASSWORD}
  - type: group
    widgets:
    - type: monitor
      title: c/infra
      hide-header: true
      cache: 5s
      sites:
      - title: argocd
        url: https://argocd.k8s.iaminyourpc.xyz
        icon: https://icon.icepanel.io/Technology/svg/Argo-CD.svg
        timeout: 10s
      - title: vault
        url: https://vault.k8s.iaminyourpc.xyz
        icon: https://docs.rconfig.com/images/logos/vault-hashicorp-logo-920x920-sue-v1.png
        timeout: 10s
      - title: kubewall
        url: http://kube.k8s.iaminyourpc.xyz
        icon: https://img.icons8.com/color/200/kubernetes.png
        timeout: 10s
      - title: longhorn
        url: http://longhorn.k8s.iaminyourpc.xyz
        icon: https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/svg/longhorn.svg
        timeout: 10s
        basic-auth:
          username: ${LONGHORN_USER}
          password: ${LONGHORN_PASSWORD}
    - type: monitor
      title: c/monitoring
      hide-header: true
      cache: 5s
      sites:
      - title: grafana
        url: https://grafana.k8s.iaminyourpc.xyz
        icon: di:grafana
        timeout: 10s
      - title: alloy
        url: https://alloy.k8s.iaminyourpc.xyz
        icon: di:alloy
        timeout: 10s
        basic-auth:
          username: ${ALLOY_USER}
          password: ${ALLOY_PASSWORD}
      - title: loki
        check-url: http://loki-backend.monitoring.svc:3100/ready
        url: https://argocd.k8s.iaminyourpc.xyz/applications/argocd/grafana-loki?view=tree&resource=
        icon: di:loki
        timeout: 10s
      - title: tempo
        check-url: http://grafana-tempo-querier.monitoring.svc:3100/ready
        url: https://argocd.k8s.iaminyourpc.xyz/applications/argocd/grafana-tempo?view=tree&resource=
        icon: https://grafana.com/static/assets/img/blog/tempo.png
        timeout: 10s
      - title: victoriametrics
        check-url: http://victoriametrics-vmselect.monitoring.svc:8481/health
        url: https://argocd.k8s.iaminyourpc.xyz/applications/argocd/victoriametrics?view=tree&resource=
        icon: https://i.imgur.com/176vBRC.png
        timeout: 10s
      - title: minio
        url: https://minio.k8s.iadfaewminyourpc.xyz
        icon: di:minio
        timeout: 10s
  columns:
  - size: small
    widgets:
    - type: calendar
      hide-header: true
      first-day-of-week: monday
    - type: custom-api
      hide-header: true
      title: car
      cache: 5s
      url: http://fetch-api.fetch-api.svc:8069/grafana/car-info
      method: POST
      body: {"ai": true}
      template: |
        <style>
          :host {
            display: block;
            height: 30px !important;
            min-height: 0 !important;
            padding: 0 !important;
          }

          .tesla-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 2px 0;
          }

          .tesla-left {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 0;
          }

          .tesla-icon img {
            width: 65px;
            height: 65px;
            object-fit: contain;
            border-radius: 6px;
            opacity: 0.95;
          }

          .tesla-title {
            font-weight: 600;
            color: rgba(230,230,230,0.75);
            letter-spacing: 0.2px;
          }

          .tesla-right {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: var(--color-positive);
          }

          .tesla-battery {
            width: 20px;
            height: 20px;
            -webkit-mask: url("https://i.imgur.com/xMUsMaq.png") no-repeat center;
            mask: url("https://i.imgur.com/xMUsMaq.png") no-repeat center;
            -webkit-mask-size: contain;
            mask-size: contain;
            background-color: var(--color-positive);
            transition: background-color 0.2s ease;
            position: relative;
            top: 0px;
          }

          .tesla-summary {
            margin-top: 8px;
            color: rgba(200,200,200,0.55);
            font-size: 13px;
            line-height: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
          }
        </style>

        {{ $items := .JSON.Array "items" }}
        {{ $first := index $items 0 }}
        {{ $battery := $first.Int "usable_battery_percentage" }}
        {{ $summary := .JSON.String "ai_summary.answer" }}

        {{ $color := "var(--color-positive)" }}
        {{ if lt $battery 40 }}{{ $color = "var(--color-warning)" }}{{ end }}
        {{ if lt $battery 15 }}{{ $color = "var(--color-negative)" }}{{ end }}

        <div class="tesla-row">
          <div class="tesla-left">
            <div class="tesla-icon">
              <img src="https://i.imgur.com/iKO7VSL.png" alt="Model 3"/>
            </div>
            <div class="tesla-title">Car Battery</div>
          </div>

          <div class="tesla-right">
            <span>{{ $battery }}%</span>
            <div class="tesla-battery" style="background-color: {{ $color }}"></div>
          </div>
        </div>

        <div class="tesla-summary">{{ $summary }}</div>

        




    - type: monitor
      hide-header: true
      cache: 5s
      sites:
      - title: jellyfin
        url: https://watch.k8s.iaminyourpc.xyz
        icon: di:jellyfin
        timeout: 10s
      - title: immich
        url: https://photos.k8s.iaminyourpc.xyz
        icon: di:immich
        timeout: 10s
      - title: pihole
        url: http://pihole.k8s.iaminyourpc.xyz/admin
        icon: https://upload.wikimedia.org/wikipedia/commons/0/00/Pi-hole_Logo.png
        timeout: 10s
      - title: teslamate
        url: http://car.k8s.iaminyourpc.xyz
        icon: https://www.pngplay.com/wp-content/uploads/13/Tesla-Logo-PNG-Photo-Image.png
        timeout: 10s
        basic-auth:
          username: ${TESLAMATE_USER}
          password: ${TESLAMATE_PASSWORD}
  - size: full
    widgets:
    - type: videos
      channels:
      - UCXuqSBlHAE6Xw-yeJA0Tunw
      - UCR-DXc1voovS8nhAvccRZhg
      - UCsBjURrPoezykLs9EqgamOA
      - UCBJycsmduvYEL83R_U4JriQ
      - UCHnyfMqiRRG1u-2MsSQLbXA
      # - UC32IO5KC2hDjFoeHzlil3gA
    - type: group
      widgets:
      - type: reddit
        subreddit: technology
        show-thumbnails: true
      - type: reddit
        subreddit: selfhosted
        show-thumbnails: true
  - size: small
    widgets:
    - type: weather
      hide-header: true
      location: Sofia, Bulgaria
      units: metric
      hour-format: 24h
